[toc]
# 磁盘知识 #

## 关于存储的几个概念

为了彻底搞清楚什么是NVMe，我们先理清楚几个关于存储的概念。 

### 尺寸外形

	也就是设备的形状和大小，通常存储设备的尺寸外形包括如下： 
	1. 2.5寸或者3.5寸驱动器
	2. M.2 和 PCI Express（PCIe）
### 接口

也就是设备如何与计算机通信。常见的存储设备接口包括： 
	
#### IDE接口

IDE的英文全称为“Integrated Drive Electronics”，即“电子集成驱动器”，它的本意是指把“硬盘控制器”与“盘体”集成在一起的硬盘驱动器。把盘体与控制器集成在一起的做法减少了硬盘接口的电缆数目与长度，数据传输的可靠性得到了增强，硬盘制造起来变得更容易，因为硬盘生产厂商不需要再担心自己的硬盘是否与其它厂商生产的控制器兼容。对用户而言，硬盘安装起来也更为方便。IDE这一接口技术从诞生至今就一直在不断发展，性能也不断的提高，其拥有的价格低廉、兼容性强的特点，为其造就了其它类型硬盘无法替代的地位。
		
IDE代表着硬盘的一种类型，但在实际的应用中，人们也习惯用IDE来称呼最早出现IDE类型硬盘ATA-1，这种类型的接口随着接口技术的发展已经被淘汰了，而其后发展分支出更多类型的硬盘接口，比如ATA、Ultra ATA、DMA、Ultra DMA等接口都属于IDE硬盘。
		
IDE接口数据传输是并行的。
		
![](https://raw.githubusercontent.com/ernest-dzf/docs/master/pic/ide_disk.jpg)
	
#### SATA接口（Serial Advanced Technology Attachment）

SATA也是一种总线标准。
	
通常用于2.5寸和3.5寸硬盘，有时候一些M.2设备也会使用。主要应用在低端服务器领域。
	
使用SATA（Serial ATA）口的硬盘又叫串口硬盘。
	
![](https://raw.githubusercontent.com/ernest-dzf/docs/master/pic/sata_1.png)
	
![](https://raw.githubusercontent.com/ernest-dzf/docs/master/pic/sata_2.jpg)
	
SATA硬盘的接口和后面要说的SAS硬盘接口有点类似。但是SAS接口是兼容SATA的，但是SATA不兼容SAS。

SATA 目前最高版本是SATA3.0，机械硬盘也采用这种类型的接口。目前主流的SATA 3.0通道的最大传输速度为6Gbps，实际速度最大为560MB/s。

我们一般说SATA的时候，指的是插槽形状。如果说SATA2.0，SATA3.0，一般就是说走的

#### mSATA

mSATA是SATA协会(Serial ATA International Organization;SATA-IO)开发的新的mini-SATA(mSATA)接口控制器的产品规范，新的控制器可以让SATA技术整合在小尺寸的装置上。
![](https://raw.githubusercontent.com/ernest-dzf/docs/master/pic/mSATA.png)
同时mSATA将提供跟SATA接口标准一样的速度和可靠度，给小尺寸CE产品(如Notebooks/ Netbook)系统开发商和制造商提供更高效能和符合经济效益的储存方案。

#### M.2

我们常说的M.2，更多是指一种尺寸或者插槽。

>M.2 drives are not another protocol like NVMe and SATA.

>Remember, M.2 is just the form factor.

M.2插槽也是有两种的，一种是金手指有两个缺口的Socket 2，另一种是金手指只有一个缺口的Socket 3。

![](https://raw.githubusercontent.com/ernest-dzf/docs/master/pic/socket_2he3.jpg)



M.2是一种固态硬盘的新接口，是Intel推出的一种替代mSATA的接口规范，是为超极本（Ultrabook）量身定做的新一代接口标准，以取代原来的mSATA接口。无论是更小巧的规格尺寸，还是更高的传输性能，M.2都远胜于mSATA。

M.2接口分两种类型，分别支持**SATA通道**与**NVME通道**。你可以理解为两种通信协议（communication transfer protocol ）。

其中SATA 3.0只有6G带宽，与普通SATA固态硬盘速度上差异不大，只是接口区别。

而后者是走PCI-E通道，能提供高达32G的带宽，NVME作为新一代存储规范，由于走PCI-E通道，带宽充足，可提升空间极大，传输速度更快，不过价格也贵上不少。

比如下面两种都是M.2接口，一种是SATA协议，一种是NVMe协议。

![](https://raw.githubusercontent.com/ernest-dzf/docs/master/pic/m2_1.jpg)



		
#### PCI Express(PCIe)接口
	
PCIe（PCI Express）取代SATA 作为最新的高带宽接口。

PCIe和M.2一样都**可以**是一种form factor（外形）。

PCIe也是一种总线的协议标准，可以通俗理解为数据走的路。

所以在看到PCIe的时候，注意具体含义是哪一种。





比如一块NVMe盘，可以是M.2接口类型的，也可以是PCIe接口类型的。但是与计算机相连的方式都是PCIe，通信协议标准是NVMe。

		
#### SCSI（Small Computer System Interface）

是同IDE（ATA）完全不同的接口，IDE接口是普通PC的标准接口，而SCSI并不是专门为硬盘设计的接口，是一种广泛应用于小型机上的高速数据传输技术。SCSI接口具有应用范围广、多任务、带宽大、CPU占用率低，以及热插拔等优点，但较高的价格使得它很难如IDE硬盘般普及，因此SCSI硬盘主要应用于中、高端服务器和高档工作站中。
	
目前 SCSI 硬盘接口有3种，分别为50针、68针和80针。通常见到硬盘型号上标有N（50针	）、W（68针）、C（80针），即表示接口针数的。
	
50针 SCSI 接口外观上类似于 IDE 接口，不同的是它的接口针脚数是50，而 IDE 接口是40。50 针数据线也与 40 针的 IDE 数据线很像，但要略宽些。68针和80针硬盘接口要比50针接口更精细一些。
	
SCSI接口的诞生比IDE晚，相比SCSI硬盘有许多先进的特性，比如支持的硬盘容量更大、传输速率更高、可管理的设备更多等等。 
	
![](https://raw.githubusercontent.com/ernest-dzf/docs/master/pic/scsi_1.jpg)
	
SCSI接口看起来有点像IDE接口，都是很多针脚。
	
![](https://raw.githubusercontent.com/ernest-dzf/docs/master/pic/scsi_ide.gif)
		
#### SAS（串行SCSI，Serial Attached SCSI）
	
![](https://raw.githubusercontent.com/ernest-dzf/docs/master/pic/sas_1.jpg)
	
SAS(Serial Attached SCSI)，是新一代的SCSI技术，和现在流行的Serial ATA(SATA)硬盘相同，都是采用串行技术以获得更高传输速度，并通过缩短连结线改善内部空间等。
	
SAS是并行SCSI接口之后开发出的全新接口。此接口的设计是为了改善存储系统的效能、可用性和扩充性，SATA可以看作是SAS的一个子协议，SAS接口完全兼容SATA，SATA接口却不能支持SAS。也就是说，如果主板上有个SAS接口，是可以接SATA硬盘的，但是反之不行。
		
#### dd

仅用于服务器领域和数据中心 PCIe接口要比SATA接口快的多，SATA3最大带宽是6Gb/s，而基于4X PCIe的M.2接口最大可以达到32Gb/s。
	
			
#### 的 

## NVMe, AHCI 和IDE区别

NVMe，AHCI和IDE都是数据传输协议。他们运行在诸如PCIe或者SATA这类的传输接口之上。

>NVMe, AHCI and IDE are transfer protocols (languages). They run on top of transfer interfaces such as PCIe or SATA (spoken, written).([quote](https://www.userbenchmark.com/Faq/What-s-the-difference-between-SATA-PCIe-and-NVMe/105))


## 总线类型 ##

### NVMe

>it’s a description of the bus the component uses to communicate with the PC. It is also unrelated to the form factor, which is why NVMe drives can come in both M.2 or PCIe card form factors


### SATA
### SCSI

### IDE