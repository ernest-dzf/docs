# paxos

参考文章：

1. http://drmingdrmer.github.io/tech/distributed/2015/11/11/paxos-slide.html
2. https://www.zhihu.com/question/19787937



**即不能从两个分布式事件的先后推导出某个节点上它们的单机子事件的先后，也不能根据某个节点上两个单机子事件的先后断言它们对应的分布式事件的先后**。

举一个简单的例子，两个节点P1，P2;分布式事件a1设置每节点的本地变量v=1,分布式式事件a2设置每个节点本地变量v=2，如果我们称a1先于a2完成，那么对于节点P1而言，v=1发生在v=2之前还是之后都有可能;反之如果P1上v=1发生在v=2之前，a1和a2哪个县完成也都有可能。



一致性需要满足三个要求：

1. v达成一致时的值是由某个进程提出的。这是为了防止像这样的作弊方式：无论如何，最终都令每个进程的v为同一个预先设置好的值，例如都令v=2，那么这样的一致也太容易了，也没有任何实际意义。
2. 一旦v就某个值达成了一致，那么v不能对另一个值再次达成一致。这个要求称为安全性。
3. 一致总是能够达成，即v总会被决定为某个值。这是因为不想无休止的等待，这个要求也称为活性。



Paxos中变量v达成一致的条件： **N个进程中大多数（超过一半） 进程都认为v是同一个值，**例如c，那么我们称**v被决定为c**。这样即使少数进程挂掉了，也不会使得一致无法达成。



Paxos保证的一致性如下：**不存在这样的情形，某个时刻v被决定为c，而另一个时刻v又决定为另一个值d。**由这个定义我们也看到，当v的值被决定后，Paxos保证了它就像是个单机的不可变变量，不再更改。也因此，对于一个客户端可以多次改写值的可读写变量在不同的节点上的一致性问题，Paxos并不能直接解决，它需要和状态机复制结合。